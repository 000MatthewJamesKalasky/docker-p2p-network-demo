#### 目的
为了方便学习共识算法，我打算在docker环境下建立一个小型篇p2p网络对共识算法进行实验。

#### 实现
每次使用docker swarm的编排时，每个容器节点的IP都是随机分配的VIP，而且内部的DNS service查询实际不准确。

首先写死IP地址以及DNS dicovery都不可行。

但docker swarm上使用docker-compose编排的replicas对外的端口唯一。

而swarm本身的overlay网络是自带负载均衡的，利用这一特点，节点每次对公用端口进行查询，从而获取同伴节点的信息。

#### 目前遇到的困难
在单机docker，设置5个replica容器的情况下，每次都能充分互相发现。

但在超过5个replica时，负载均衡有时开始失灵，其中常常出现对公用端口查询多次仍连接到同一同伴节点的现象。

依靠负载均衡这种纯概率查询达到节点全覆盖不现实，尝试设置多次服务查询以及定时服务查询。

其他考虑：另外实现单一的发现服务器，每次节点入网从该服务器中登记自身IP并拿取网络节点IP表。

同时也可将该服务作为共识情况统计服务器。

#### TODO
- [ ] 网络监测服务 
- [ ] 简易连接检验
- [ ] 加入socket心跳检测功能